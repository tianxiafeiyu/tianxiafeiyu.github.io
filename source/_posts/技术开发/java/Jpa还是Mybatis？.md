---
title: Jpa还是Mybatis？
date: 2022-12-15 23:38:00
updated: 2022-12-16 21:36:16
toc: true
tags: 
    - Jpa还是Mybatis？
---
转自 <https://www.zhihu.com/question/356307466>

绝大部分一般要求的业务需求项目，数据量不大，并发压力也不大，他们两个的效率比直接用JDBC的查询效率损失都可以忽略不计。这些项目包括：并发不大，查询一次记录50ms还是150ms其实没什么区别，也不会有很复杂的多个超大表的组合、聚合、子查询这类复杂操作，这时候其实用哪个都还好。如果硬说区别：

1、jpa+hibernate，开发速度快，搞cqrs什么的也方便，对于对开发速度有要求的项目，非常不错。不要迷信换框架，或者换数据库类型，基本上没这个操作，去IOE也就是大公司有那么一两次机会。大家对数据库的依赖程度高到骨头里，轻易不会换的。jpa+hibernate其实也能原生sql，就算是复杂点的sql，hibernate自己也能处理。大家觉得之前用hibernate不爽的可能是hql的不透明，导致不好去针对性优化，对于简单业务其实问题也不大。现在特别提倡全栈、devops，对于一杆子通到底的系统开发，jpa+hibernate是利器。同时hibernate封装了一些dialect的最佳实践，简单的分页之类，可以限制新手写错了，提高了效率。。。总之越简单越小白的系统，越推荐。对了，搞DDD的业务系统开发，也推荐。

2、mybatis，有一定规模的大的系统、数据量很大、并发也大的，对性能有很高要求的，这类系统很少，但是比较推荐用mybatis，大家说的性能其实是次要的，主要是规范管理+方便调优。mybatis是针对DBA友好的，可能很多人意识不到，大公司的开发人员写的SQL是不能直接上线的，一定需要经过DBA去review，这样一个项目把这次修改的所有代码提交，代码的diff自动通过工具提交到了资源开发或架构师那边去review，而mapper文件里的这些SQL的变动会到DBA这边来review，这是非常关键的。开发人员可能并不清楚改动的SQL会对线上造成什么影响，也没有机会让开发人员去线上试验。而DBA可以给出意见，或者修订这些提交的SQL，甚至让开发人员修改或拆分SQL，比如加上一些hint，这个操作用jpa貌似就不好办了。